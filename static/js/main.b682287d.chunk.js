(this.webpackJsonpcovid2019=this.webpackJsonpcovid2019||[]).push([[0],{125:function(e,t,n){},204:function(e,t,n){e.exports=n(246)},234:function(e,t,n){},235:function(e,t,n){},240:function(e,t,n){},242:function(e,t,n){},245:function(e,t,n){},246:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(13),o=n.n(c),i=n(11),l=n(287),u=n(285),s=n(286),m=n(292),f=n(6),d=[["Confirmed","https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_global.csv"],["Deaths","https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_deaths_global.csv"],["Recovered","https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_recovered_global.csv"]],h=["Province/State","Country/Region","Lat","Long"],b={Peru:{"3/16/20":"Quarantine starts"}},g=function(){var e=Object(a.useState)(null),t=Object(i.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){Promise.all(d.map((function(e){return Object(f.b)(e[1])}))).then((function(e){var t=e.map((function(e,t){return Object(f.i)().key((function(e){return e["Country/Region"]})).key((function(e){return e.date})).map(function(e,t){var n=[];return e.forEach((function(e){Object.keys(e).filter((function(e){return!h.includes(e)})).forEach((function(a){if(""!==e[a]){var r={};h.forEach((function(t){return r[t]=e[t]})),r.date=a,r[t]=+e[a],n.push(r)}}))})),n}(e,d[t][0]))})),n=t[0].keys(),a=[];n.forEach((function(e){var n=t.map((function(t){return t["$".concat(e)]})).filter((function(e){return e})),r=n[0].keys(),c=-1,o=-1,i=b[e];r.forEach((function(e){var t=n.map((function(t){return t["$".concat(e)]})),r={};h.forEach((function(n){var a=t[0][0][n];if(r[n]=["Lat","Long"].includes(n)?+a:a,i){var c=i[e];c&&(r.annotation=c)}})),t.forEach((function(e,t){if(e){var n=d[t][0];r[n]=e.map((function(e){return e[n]})).reduce((function(e,t){return t+e}))}})),r.Confirmed>0&&(c++,r.date=new Date(e),r.idxConfirmed=c,r.Deaths>0&&(o++,r.idxDeaths=o),a.push(r))}))}));var c=Object(f.i)().key((function(e){return e["Country/Region"]})).sortValues((function(e,t){return e.date-t.date})).map(a);r(c)}))}),[]),n},v=n(127),E=n(60),p=n.n(E),O=(n(125),function(e){var t=e.xScale,n=e.boundedHeight,c=e.boundedWidth,o=e.date,i=e.label,l=e.labelOffset,u=e.tickSize,s=e.tickOffset,m=e.tickWidth,f=e.tickWidthDate,d=Object(a.useMemo)((function(){return t?t.range():{}}),[t]),h=Object(a.useMemo)((function(){return c/(o?f:m)}),[c,m,f,o]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("path",{className:"line",d:["M",d[0],n,"H",d[1]].join(" "),fill:"none"}),t&&t.ticks(h).map((function(e,a){return r.a.createElement("g",{className:"tick",key:a,transform:"translate(".concat(t(e),",0)")},r.a.createElement("line",{y1:n,y2:n+u}),r.a.createElement("text",{style:{textAnchor:"middle"},dy:".71em",y:n+s},o?p()(e).format("Do MMM"):e))})),i&&r.a.createElement("text",{className:"label",x:c/2,y:n+l,textAnchor:"middle"},i))}),j=Object(f.f)(".0s"),y=function(e){var t=e.yScale,n=e.boundedHeight,c=e.boundedWidth,o=e.label,i=e.labelOffset,l=e.tickSize,u=e.tickOffset,s=e.tickHeight,m=Object(a.useMemo)((function(){return t.range()}),[t]),f=Object(a.useMemo)((function(){return n/s}),[n,s]),d=t.tickFormat(f,"");return r.a.createElement(r.a.Fragment,null,r.a.createElement("path",{className:"line",d:["M",0,m[1],"v",m[0]].join(" "),fill:"none"}),t.ticks(f).filter((function(e){return e>=1})).map(d).filter((function(e){return""!==e})).map((function(e,n){return r.a.createElement("g",{key:n,className:"tick",transform:"translate(0,".concat(t(e),")")},r.a.createElement("line",{x2:-l}),r.a.createElement("line",{className:"axis-line",x2:c}),r.a.createElement("text",{key:e,style:{textAnchor:"end"},x:-u,dy:".32em"},j(e)))})),o&&r.a.createElement("text",{className:"label",textAnchor:"middle",transform:"translate(".concat(-i,",").concat(n/2,") rotate(-90)")},o))},x=n(128),k=n(77),C=(n(234),function(e){var t=e.x,n=e.y,c=e.r,o=e.fill,l=e.transition,u=Object(k.b)((function(){return{config:{duration:l,easing:f.c},cx:t,cy:n,r:0,fill:o||"#efefef"}})),s=Object(i.a)(u,2),m=s[0],d=s[1];return Object(a.useEffect)((function(){d({cx:t,cy:n,r:c,fill:o||"#efefef"})}),[d,t,n,o,c]),r.a.createElement(k.a.circle,m)}),S=function(e){var t=e.data,n=e.xScale,c=e.yScale,o=e.xValue,i=e.yValue,l=e.transition,u=e.color,s=Object(a.useRef)(null);return Object(a.useEffect)((function(){Object(f.n)(s.current).transition().duration(l).ease(f.c).attrTween("d",(function(){var e=Object(f.n)(this).attr("d"),a=Object(f.g)().x((function(e){return n(o(e))})).y((function(e){return c(i(e))}))(t);return Object(x.interpolatePath)(e,a)}))}),[t,n,c,o,i,l]),r.a.createElement("g",{className:"marks"},r.a.createElement("path",{ref:s,stroke:u}))},w=n(64),_=n(135),M=function(e){var t=Object(w.a)({},e,{marginTop:e.marginTop||10,marginRight:e.marginRight||10,marginBottom:e.marginBottom||40,marginLeft:e.marginLeft||75});return Object(w.a)({},t,{boundedHeight:Math.max(t.height-t.marginTop-t.marginBottom,0),boundedWidth:Math.max(t.width-t.marginLeft-t.marginRight,0)})},N=n(289),D=n(288),R=n(293),L=(n(235),function(e){var t=e.tag,n=e.color,a=e.onDelete;return r.a.createElement(R.a,{className:"location-tag",label:t,onDelete:function(e){return a(e,t)},style:{backgroundColor:n,color:"white"}})}),A=function(e){var t=e.locations,n=e.values,a=e.colors,c=e.colorScheme,o=e.onChange,i=e.onDelete;return r.a.createElement(N.a,{className:"autocomplete",multiple:!0,options:t.sort(f.a),value:n,onChange:o,renderInput:function(e){return r.a.createElement(D.a,Object.assign({},e,{variant:"standard",label:"Select locations"}))},renderTags:function(e){return e.map((function(e,t){return r.a.createElement(L,{key:e,tag:e,color:c[a[e]%c.length],onDelete:i})}))}})},T=(n(240),Object(f.f)(",")),V=function(e){var t=e.data,n=e.x,c=e.y,o=e.color,i=e.up,l=Object(a.useMemo)((function(){if(t)return{date:p()(t.date).format("Do MMM"),country:t["Country/Region"],confirmed:T(t.Confirmed),deaths:T(t.Deaths),recovered:T(t.Recovered)}}),[t]);return r.a.createElement("div",{className:"wrapper",style:{transform:"translate(".concat(n,"px,").concat(i?"calc(".concat(c-10,"px - 100%)"):"".concat(c+30,"px"),")"),backgroundColor:o,opacity:l?.85:0}},r.a.createElement("div",{className:"chart-tooltip"},t&&r.a.createElement(r.a.Fragment,null,r.a.createElement("b",null,l.country," - ",l.date),r.a.createElement("br",null),r.a.createElement("span",null,"Confirmed: ",l.confirmed),r.a.createElement("br",null),r.a.createElement("span",null,"Deaths: ",l.deaths),r.a.createElement("br",null),r.a.createElement("span",null,"Recovered: ",l.recovered))))},I=n(65),z=n(66);function W(){var e=Object(I.a)(["\n  position: absolute;\n  cursor: pointer;\n  border-radius: 1rem;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: ",";\n  -webkit-transition: 0.2s;\n  transition: 0.2s;\n\n  &:before {\n    position: absolute;\n    content: '';\n    border-radius: 50%;\n    height: ","rem;\n    width: ","rem;\n    left: ","rem;\n    bottom: ","rem;\n    background-color: white;\n    -webkit-transition: 0.2s;\n    transition: 0.2s;\n  }\n\n  input:checked + & {\n    background-color: ",";\n  }\n\n  input:focus + & {\n    box-shadow: 0 0 1px ",";\n  }\n\n  input:checked + &:before {\n    -webkit-transform: translateX(","rem);\n    -ms-transform: translateX(","rem);\n    transform: translateX(","rem);\n  }\n"]);return W=function(){return e},e}function H(){var e=Object(I.a)(["\n  position: relative;\n  display: inline-block;\n  width: ","rem;\n  height: ","rem;\n\n  input {\n    opacity: 0;\n    width: 0;\n    height: 0;\n  }\n"]);return H=function(){return e},e}function B(){var e=Object(I.a)(["\n  color: black;\n  font-size: 0.9rem;\n  font-weight: ",";\n  // font-weight: ",";\n  opacity: ",";\n  margin-left: ","rem;\n  margin-right: ","rem;\n  transition: 0.2s;\n"]);return B=function(){return e},e}var P=z.a.label(B(),(function(e){return e.active?400:300}),(function(e){return e.active?500:400}),(function(e){return e.active?1:.5}),(function(e){return e.right?.25:0}),(function(e){return e.left?.25:0})),X=z.a.label(H(),(function(e){return e.width}),(function(e){return e.height})),F=z.a.span(W(),(function(e){return e.inactiveColor}),(function(e){return e.ballSize}),(function(e){return e.ballSize}),(function(e){return e.ballMargin}),(function(e){return e.ballMargin}),(function(e){return e.activeColor}),(function(e){return e.activeColor}),(function(e){return e.move}),(function(e){return e.move}),(function(e){return e.move})),G=function(e){var t=e.value,n=e.preLabel,a=e.label,c=e.width,o=void 0===c?3.5:c,i=e.height,l=void 0===i?1.5:i,u=e.ballMargin,s=void 0===u?.2:u,m=e.activeColor,f=void 0===m?"#007bff":m,d=e.inactiveColor,h=void 0===d?"#ccc":d,b=e.onChange,g=void 0===b?function(){}:b,v=l-2*s;return r.a.createElement("div",null,n&&r.a.createElement(P,{left:!0,active:!t},n),r.a.createElement(X,{width:o,height:l},r.a.createElement("input",{type:"checkbox",checked:t,onChange:g}),r.a.createElement(F,{ballSize:v,move:o-v-2*s,ballMargin:s,activeColor:f,inactiveColor:h})),a&&r.a.createElement(P,{right:!0,active:t},a))},Y=(n(242),n(291)),$=function(e){var t=e.data,n=e.xScale,c=e.xValues,o=e.yScale,i=e.yValues,l=e.width,u=e.height,s=e.marginLeft,m=e.marginRight,f=e.marginBottom,d=e.marginTop,h=e.onMouseEnter,b=void 0===h?function(){}:h,g=e.onMouseLeave,v=void 0===g?function(){}:g,E=Object(a.useMemo)((function(){if(t)return t.map((function(e){return e.map((function(e){return{x:n(c(e)),y:o(i(e))}}))}))}),[t,n,c,o,i]),p=Object(a.useMemo)((function(){return[0,0,l-m-s+100,u-f-d+100]}),[u,f,s,m,d,l]),O=Object(a.useMemo)((function(){if(!(p[2]-p[0]<=0||p[3]-p[1]<=0)){var e=E.map((function(e,t){return e.map((function(e,n){return Object.assign({loc:t,day:n},e)}))})).flat();return{points:e,voronoi:Y.a.from(e.map((function(e){return[e.x+p[0],e.y+p[1]]}))).voronoi(p)}}}),[E,p]),j=Object(a.useMemo)((function(){if(O){var e=O.points,t=O.voronoi;return e.map((function(e,n){var a=e.x,c=e.y,o=e.loc,i=e.day;return r.a.createElement("path",{key:n,d:t.renderCell(n),opacity:0,onMouseEnter:function(){return b(o,i,a,c)},onTouchStart:function(){return b(o,i,a,c)},onTouchEnd:function(){return v(o,i,a,c)},onMouseLeave:function(){return v(o,i,a,c)}})}))}}),[O,b,v]);return r.a.createElement("g",null," ",j," ")},J=function(e){var t=e.title,n=e.data,c=e.dimensions,o=e.xAxis,l=e.yAxis,d=e.transitions,h=e.defaultLocations,b=e.onClose,g=function(e){var t=Object(a.useRef)(),n=M(e),r=Object(a.useState)(0),c=Object(i.a)(r,2),o=c[0],l=c[1],u=Object(a.useState)(0),s=Object(i.a)(u,2),m=s[0],f=s[1];Object(a.useEffect)((function(){if(n.width&&n.height)return[t,n];var e=t.current,a=new _.a((function(e){if(Array.isArray(e)&&e.length){var t=e[0];o!==t.contentRect.width&&l(t.contentRect.width),m!==t.contentRect.height&&f(t.contentRect.height)}}));return a.observe(e),function(){return a.unobserve(e)}}),[]);var d=M(Object(w.a)({},n,{width:n.width||o,height:n.height||m}));return[t,d]}(c),E=Object(i.a)(g,2),p=E[0],j=E[1],x=j.width,k=j.height,N=j.marginLeft,D=j.marginTop,R=j.marginBottom,L=j.marginRight,T=j.boundedHeight,I=j.boundedWidth,z=Object(a.useRef)(),W=Object(a.useState)(h),H=Object(i.a)(W,2),B=H[0],P=H[1],X=Object(a.useState)({}),F=Object(i.a)(X,2),Y=F[0],J=F[1],Q=Object(a.useState)(),q=Object(i.a)(Q,2),K=q[0],U=q[1],Z=Object(a.useState)(!1),ee=Object(i.a)(Z,2),te=ee[0],ne=ee[1],ae=Object(a.useState)(!1),re=Object(i.a)(ae,2),ce=re[0],oe=re[1],ie=function(e){var t=e.ref,n=Object(a.useState)({k:1,x:0,y:0}),r=Object(i.a)(n,2),c=r[0],o=r[1];return Object(a.useEffect)((function(){var e=Object(f.o)().scaleExtent([1,3]).on("zoom",(function(){o(f.d.transform)})),n=Object(f.n)(t.current);n.call(e),n.on("dblclick.zoom",(function(){e.transform(n,f.p)}))}),[t]),c}({ref:z}),le=Object(a.useCallback)((function(e){return ce?te?e.idxDeaths:e.idxConfirmed:e.date}),[ce,te]),ue=Object(a.useCallback)((function(e){return te?e.Deaths:e.Confirmed}),[te]),se=Object(a.useMemo)((function(){if(n)return B.map((function(e){return n["$".concat(e)]})).map((function(e){return e.filter((function(e){return ue(e)>=1}))}))}),[n,B,ue]),me=Object(a.useMemo)((function(){if(se){var e=Object(f.e)(se.map((function(e){return e.map(le)})).flat());return(ce?f.j:f.l)().domain(e).range([0,I])}}),[se,le,I,ce]),fe=Object(a.useMemo)((function(){if(se){var e=[1,Object(f.h)(se.map((function(e){return e.map(ue)})).flat())];return Object(f.k)().domain(e).range([T,0]).nice()}}),[se,ue,T]),de=Object(a.useMemo)((function(){if(me)return ie.rescaleX?ie.rescaleX(me):me.copy()}),[me,ie]),he=Object(a.useMemo)((function(){if(fe)return ie.rescaleY?ie.rescaleY(fe):fe.copy()}),[fe,ie]);Object(a.useEffect)((function(){n&&J((function(e){var t=Object.keys(e);if(0===t.length){var n={};return B.forEach((function(e,t){return n[e]=t})),n}var a=Object.values(e),r=Object.assign({},e);return B.filter((function(e){return!t.includes(e)})).forEach((function(e){for(var t=0;a.includes(t);)t++;r[e]=t})),t.filter((function(e){return!B.includes(e)})).forEach((function(e){delete r[e]})),r}))}),[n,B]);var be=Object(a.useMemo)((function(){if(se){var e=[];return se.forEach((function(t){t.filter((function(e){return e.annotation})).forEach((function(t){var n=me(le(t)),a=fe(ue(t));e.push({className:"custom-annotation",x:n,y:a,dx:n+30+N+80>=x-L?-30:30,dy:20,note:{title:t["Country/Region"],label:t.annotation,lineType:null,align:"middle",wrap:80,orientation:"leftRight"},subject:{radius:10,radiusPadding:0}})}))})),e}}),[N,L,se,x,me,le,fe,ue]),ge=Object(a.useMemo)((function(){if(se)return r.a.createElement(r.a.Fragment,null,se.map((function(e,t){if(0!==e.length){var n=e[0]["Country/Region"],a=f.m[Y[n]%f.m.length];return r.a.createElement(S,{key:n,data:e,xScale:me,yScale:fe,xValue:le,yValue:ue,transition:d.lines,color:a})}})))}),[Y,se,d.lines,me,le,fe,ue]),ve=Object(a.useCallback)((function(e,t,n,a){var r,c,o,i=se[e][t],l=de(me.invert(n)),u=he(fe.invert(a));U({data:i,x:(r=l,c=N,o=I-L-25,r>=o?o:r<=c?c:r),y:u,tooltipX:n,tooltipY:a,up:u>T/2,color:f.m[Y[i["Country/Region"]]%f.m.length]})}),[T,I,Y,N,L,se,me,de,fe,he]),Ee=Object(a.useCallback)((function(){return U("")}),[]);return r.a.createElement("div",{className:"chart"},r.a.createElement(u.a,{className:"chart-selector justify-content-center"},r.a.createElement(s.a,{className:"select-location"},r.a.createElement(A,{locations:n?n.keys():h,values:B,colors:Y,colorScheme:f.m,onChange:function(e,t){return P(t)},onDelete:function(e,t){return P((function(e){var n=e.indexOf(t),a=e.slice();return a.splice(n,1),a}))}})),r.a.createElement(s.a,{className:"close-wrapper"},r.a.createElement(m.a,{variant:"outline-danger close-button",size:"sm",onClick:b},r.a.createElement("span",null,"x")))),r.a.createElement(u.a,{className:"justify-content-between"},r.a.createElement(s.a,{className:"chart-options",sm:12,md:6},r.a.createElement("label",{className:"chart-option-label"},"Show value:"),r.a.createElement(G,{value:te,preLabel:"Confirmed",label:"Deaths",width:2.75,height:1.3,activeColor:"#7a9abe",inactiveColor:"#7a9abe",onChange:function(){return ne((function(e){return!e}))}})),r.a.createElement(s.a,{className:"chart-options",sm:12,md:6},r.a.createElement("label",{className:"chart-option-label"},"x Axis:"),r.a.createElement(G,{value:ce,preLabel:"Date",label:"Days since",width:2.75,height:1.3,activeColor:"#7a9abe",inactiveColor:"#7a9abe",onChange:function(){return oe((function(e){return!e}))}}))),r.a.createElement(u.a,{className:"chart-container",ref:p},r.a.createElement(s.a,null,r.a.createElement("svg",{width:x,height:k,style:{position:"absolute"}},r.a.createElement("g",{transform:"translate(".concat(N,",").concat(D,")")},t&&r.a.createElement("text",{className:"title",x:I/2+t.dx,y:t.dy,textAnchor:"middle"},t.label),se?r.a.createElement(r.a.Fragment,null,r.a.createElement(O,Object.assign({xScale:de,boundedHeight:T,boundedWidth:I,date:!ce},o)),r.a.createElement(y,Object.assign({yScale:he,boundedHeight:T,boundedWidth:I},l))):r.a.createElement("text",null,"Loading..."))),r.a.createElement("svg",{width:x-N-L,height:k-D-R,style:{position:"absolute",marginLeft:N,marginTop:D}},r.a.createElement("g",null,se&&r.a.createElement("g",{transform:"translate(".concat(ie.x,", ").concat(ie.y,") scale(").concat(ie.k,")")},ge,K&&r.a.createElement(C,{x:K.tooltipX,y:K.tooltipY,r:10,fill:K.color,transition:d.highlight}),be.map((function(e,t){return r.a.createElement(v.AnnotationCalloutCircle,Object.assign({key:t},e))}))))),r.a.createElement(V,K),r.a.createElement("svg",{ref:z,width:x,height:k,style:{position:"absolute"}},r.a.createElement("g",{transform:"translate(".concat(ie.x+N,", ").concat(ie.y+D,") scale(").concat(ie.k,")")},se&&r.a.createElement($,Object.assign({data:se,onMouseEnter:ve,onMouseLeave:Ee},{xValues:le,yValues:ue,xScale:me,yScale:fe,width:x,height:k,marginLeft:N,marginRight:L,marginBottom:R,marginTop:D})))))))},Q=(n(244),n(245),{dimensions:{marginTop:10,marginRight:35,marginBottom:30,marginLeft:75},xAxis:{tickSize:6,tickOffset:15,tickWidth:80,tickWidthDate:140},yAxis:{label:"Cases",labelOffset:50,tickSize:6,tickOffset:10,tickHeight:80},transitions:{lines:500,highlight:100},defaultLocations:["Peru","Australia","Iran","Italy"]});var q=function(){var e=g(),t=Object(a.useState)([0]),n=Object(i.a)(t,2),c=n[0],o=n[1];return r.a.createElement(l.a,{className:"app-container"},r.a.createElement("header",null,r.a.createElement("h1",{className:"mt-4 mb-4"},"Covid 2019")),r.a.createElement("main",{className:"app-main"},r.a.createElement(u.a,null,r.a.createElement(s.a,null,r.a.createElement("p",null,"Plots of coronavirus data (",r.a.createElement("a",{href:"https://github.com/CSSEGISandData/COVID-19/tree/master/csse_covid_19_data",target:"_black"},"source"),")."))),r.a.createElement(u.a,null,c.map((function(t){return r.a.createElement(s.a,{key:t,md:12,xl:c.length>1?6:12},r.a.createElement(J,Object.assign({data:e,onClose:function(){return o((function(e){var n=e.indexOf(t),a=e.slice();return a.splice(n,1),a}))}},Q)))}))),r.a.createElement(u.a,{className:"mt-2"},r.a.createElement(s.a,{className:"text-right"},r.a.createElement(m.a,{onClick:function(){return o((function(e){var t=0===e.length?0:e[e.length-1]+1;return e.concat(t)}))}},"Add Chart")))),r.a.createElement("footer",null,r.a.createElement(u.a,null,r.a.createElement(s.a,{className:"mt-4 text-right"},r.a.createElement("a",{href:"https://github.com/renato145/covid2019",target:"_black"},"Source code")))))};o.a.render(r.a.createElement(q,null),document.getElementById("root"))}},[[204,1,2]]]);
//# sourceMappingURL=main.b682287d.chunk.js.map